\section{Moorer}

Il testo\footcite{jm:rev} di \jam non è completo e preciso come il
testo\footcite{ms:rev62} di \ms. Tuttavia, è significativo riportare almeno
le implementazioni di efficienza relative al numero dei moltiplicatori impiegati
nella realizzazione degli \emph{All-Pass} che concorrente all'aumento delle
risorse informatiche disponibili al tempo, consente l'introduzione di piccoli
filtri all'interno del sistema di riverberazione.

\lstinputlisting{Code/amapf.dsp}

\begin{figure}[htp]
\centering
\includegraphics[width=1\textwidth]{Code/amapf-svg/process.pdf}
\caption{All Pass \emph{one-multiply} descritto da \jam}
\label{fig:amapf}
\end{figure}

\lstinputlisting{Code/amapfo.dsp}

\begin{figure}[htp]
\centering
\includegraphics[width=1\textwidth]{Code/amapfo-svg/process.pdf}
\caption{All Pass \emph{oscillante} descritto da \jam}
\label{fig:amapfo}
\end{figure}

\lstinputlisting{Code/amcomblp.dsp}

\begin{figure}[htp]
\centering
\includegraphics[width=1\textwidth]{Code/amcomblp-svg/process.pdf}
\caption{All Pass \emph{oscillante} descritto da \jam}
\label{fig:amcombfir}
\end{figure}

\section{Atmoverb}

Si conclude infine con la progettazione del riverbero Atmoverb, utilizzando le conoscenze 
maturate finora. 
Il riverbero, come detto in precedenza ha come parametri di controllo relativi alle condizioni
atmosferiche dello spazio circostante. Gli algoritmi di base utilizzati saranno i medesimi 
implementati in precedenza: Comb con Low Pass (figura \ref{fig:amcombfir}) e All Pass lattice(figura \ref{fig:amapfo})

I parametri di controllo Temperatura, Pressione, Umidità, Gas

\begin{code}
atm = hslider("Pressure", 1, 0.1, 10, .1);
press = 76 * (atm);
temp = hslider("Temperature", 20, -200, 200, .1);
stp = (1.2930, 0.7710, 1.2507, 3.2170, 1.9760, 0.0899, 0.7170, 1.2500,1.4290, 0.804);
dens = (ba.take(1,stp)*press)/(press * (1 + (0.00367* (temp))));
velSuono = sqrt((1.402*atm*(1.013*10^5))/dens) ;
\end{code}


\bigskip 

Viene così definita la velocità del suono che in seguto influenza i tempi di Delay dei vari Comb,
in base alla posizione del suono nello spazio.

\begin{code}
x = hslider("x",.5,.1,.99,.001);
y = hslider("y",.5,.1,.99,.001);
z = hslider("z",.15,.1,.99,.001); 

Dim = hslider("Room Dimension",1,1,100,.1);

altezza = 3*Dim;
larg = 3*Dim;
lung = 6*Dim;
\end{code}

Le variabili x, y, z servono per identidficare il punto di origine dell'evento sonoro, scalate 
per Dim in modo da rendere variabile la dimensione della stanza.

I coefficenti di assorbimento delle pareti sono stati inseriti anch'essi, in quanto sappiamo
avere una certa influenza sul risultato sonoro. I valori sono compresi tra 0 
(completamente assorbente) e 1 (completamente riverberante). I valori sono stati decisi
arbitrariamente per simulare una sala da concerto (il pavimento è il valore più basso per 
l'influenza delle sedute). 

\begin{code}
rifLat = .8;
rifFro = .5;
rifSoff = .85;
rifPav = .3;
\end{code}

Dato che il riverberp utilizza un'architettura Comb-AllPass, avente quindi diversi valori di g e di t
per i vari comb, calcoliamo i coefficenti utilizzando le variabili descritte prima.

\begin{code}
t1 = ((z*altezza)/velSuono);
t6 = (((1 - z)*altezza)/velSuono);
t2 = ((x*larg)/velSuono);
t3 = (((1 - x)*larg)/velSuono);
t4 = ((y*lung)/velSuono);
t5 = (((1 - x)*lung)/velSuono);

ts = (t1, t6, t2, t3, t4, t5);
tsa1 = (t1,t2,t4);
tsa2 = (t6,t3,t5);
\end{code}